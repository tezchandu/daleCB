<template>
    <lightning-card >
        <!-- Status and Event Subtype Filters -->
        <div class="slds-align_absolute-center slds-var-p-around_medium slds-text-heading_small"><b>
                Welcome! Below you will find the links to the Carnegie Learning Center (CLC) Schedule
                of events. Filter the event based on any of the listed categories.  Please visit the  
                 <a href=https://dalecarnegieassociates.sharepoint.com/carnegie-learning-center/Pages/default.aspx target="_blank"> CLC
                page</a> on Carnegie Connect for more information on your trainer journey and what the CLC has to offer.</b></div>
        <div class="slds-grid">
            
            <!--
            <div class="slds-col slds-size_2-of-12  slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-combobox
                    label="Date"
                    value={selectedDate}
                    options={dateOptions}
                    onchange={handleDateChange}>
                </lightning-combobox>
            </div>-->
            <div class="slds-col slds-size_2-of-12 slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-input
                    label="Start Date"
                    type="date"
                    value={selectedStartDate}
                    onchange={handleStartDateChange}
                ></lightning-input>
            </div>
            <div class="slds-col slds-size_2-of-12 slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-input
                    label="End Date"
                    type="date"
                    value={selectedEndDate}
                    onchange={handleEndDateChange}
                ></lightning-input>
            </div>
            <div class="slds-col slds-size_2-of-12  slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-combobox
                    label="Event Type"
                    value={selectedEventtype}
                    options={eventTypeOptions}
                    onchange={handleEventtypeChange}>
                </lightning-combobox>
            </div>
            <div class="slds-col slds-size_2-of-12  slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-combobox
                    label="Region"
                    value={selectedRegion}
                    options={regionOptions}
                    onchange={handleRegionChange}>
                </lightning-combobox>
            </div>
            <div class="slds-col slds-size_2-of-12 slds-box_x-small slds-text-align_center slds-m-around_x-small">
                <lightning-combobox
                    label="Public/Private"
                    value={selectedpublicprivate}
                    options={publicprivateOptions}
                    onchange={handlePublicPrivateChange}>
                </lightning-combobox>
            </div>
        </div><br/><br/>
        <!-- Table to Display Records 

            <div class="datatable-container">
        <lightning-datatable
            data={filteredRecords}
            columns={columns}
            key-field="Id">
        </lightning-datatable>
        </div>
-->
        <div>
            <table class="slds-table slds-table_cell-buffer slds-table_bordered" aria-labelledby="element-with-table-label other-element-with-table-label">
                <thead>
                    <tr>
                        <th>Event Code</th>
                        <th>Event Type</th>
                        <th>Location</th>
                        <th>Start Date</th>
                        
                        <th>Region</th>
                        <th>Registration Deadline</th>
                        <th>Public/Private</th>
                        <th>Language</th>
                        <th>Estimated Cost per Candidate</th>
                             
                    </tr>
                </thead>
                <tbody>
                    <template for:each={filteredRecords} for:item="event">
                        <tr key={event.Id}>
                                    <td>
                                        {event.Name}
                                    </td>
                                    <td>
                                        {event.Event_Type__c}
                                    </td>
                                    <td>
                                        {event.Location__c}
                                    </td>
                                    <td>
                                        {event.Session_One_Date_from_DateTime__c}
                                    </td>
                                    
                                    <td>
                                        {event.Region__c}
                                    </td>
                                    <td>
                                        {event.Deadline__c}
                                    </td>
                                    <td>
                                        {event.Public_Private__c}
                                    </td>
                                    <td>
                                        {event.Language__c} 
                                    </td>
                                    
                                    <td>
                                        {event.Estimated_Cost_per_Candidate__c}
                                    </td>
                                    
                                    <td>
                                        <template if:true={event.isInProgress}>
                                        <lightning-button variant="brand" label="Register" data-id={event.Id} onclick={openChildComponent}  >
                                            Register- {event.Id}
                                        </lightning-button>
                                        
                                        </template>
                                        <template if:true={showChildComponent}>
                                            <!-- Semi-transparent background -->
                                            <div class="slds-backdrop slds-backdrop_open ">
                                            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                                                aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                                <div class="slds-modal__container">
                                                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                                            title="Close" onclick={closeChildComponent}>
                                                            <lightning-icon icon-name="utility:close" alternative-text="Close"></lightning-icon>
                                                            <span class="slds-assistive-text">Close</span>
                                                        </button>
                                                    <!-- Header of the modal 
                                                    <template if:true={showChildComponent}>
                                                       showChildComponent- {showChildComponent}
                                                    <header class="slds-modal__header">
                                                        <h2 id="modal-heading-01" class="slds-text-heading_medium">Event Registration Form</h2>
                                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                                            title="Close" onclick={closeChildComponent}>
                                                            <lightning-icon icon-name="utility:close" alternative-text="Close"></lightning-icon>
                                                            <span class="slds-assistive-text">Close</span>
                                                        </button>
                                                    </header>
                                                    </template>-->
                                                    <!-- Body of the modal (include ChildComponent here) -->
                                                    <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" >
                                                        
                                                        <c-event-request-form  event-id={eventID} if:true={showChildComponent}
                                                         onsubmitform ={hanldeSubmitFormChange}>
                                                        </c-event-request-form>
                                                        
                                                            <template if:true={showSuccessMessage}>
                                                                success
                                                            <!--<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-12">
                                                                        <c-success-message ></c-success-message>
                                                            </div>-->
                                                            </template>
                                                        
                                                    </div>
                                                </div>
                                            </section>
                                            </div>
                                        </template><!--
                                        <template if:false={showChildComponent}>
                                            <template if:true={showSuccessMessage}>
                                                 success
                                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-12">
                                                        <c-success-message ></c-success-message>
                                            </div>
                                            </template>
                                        </template>-->
                                        <!--<c-event-registration-form if:true={showChildComponent}></c-event-registration-form>-->
                                    </td>
                                    
                                        
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
        
        
    </lightning-card>
</template>